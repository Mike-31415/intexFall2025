<!-- Group 2-11
 
Edit Milestones page: allows admin/managers to edit information (participant, title, date)
for a milestone.

-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Milestones</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>

    <%- include('partials/header') %>

    <div class="form-card">
        <h2>Edit Milestone</h2>

        <% if (error_message) { %>
            <div class="error-message"><%= error_message %></div>
        <% } %>

        <form action="/milestones/edit/<%= milestone.milestoneid %>" method="POST">

            <!-- Participant dropdown -->
            <div class="form-row">
                <label for="participantid">Participant</label>
                <select id="participantid" name="participantid" required>
                    <option value="">-- Select a participant --</option>
                    <% participants.forEach(p => { %>
                        <option value="<%= p.participantid %>" <%= (milestone.participant_id == p.participantid) ? 'selected' : '' %>>
                            <%= p.participantname %>
                        </option>
                    <% }) %>
                </select>
            </div>

            <!-- Milestone Title -->
            <div class="form-row">
                <label for="milestonetitle">Milestone Title</label>
                <input 
                    type="text" 
                    id="milestonetitle" 
                    name="milestonetitle"
                    value="<%= milestone.milestonetitle %>"
                    required
                >
            </div>

            <!-- Milestone Date -->
            <div class="form-row">
                <label for="milestonedate">Milestone Date</label>
                <input 
                    type="date" 
                    id="milestonedate" 
                    name="milestonedate"
                    value="<%= milestone.milestonedate %>"
                    required
                >
            </div>

            <!-- Save Button -->
            <div class="form-row" style="margin-top: 20px;">
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>

            <!-- Cancel Button -->
            <div class="form-row" style="margin-top: 10px;">
                <a href="/milestones" class="btn btn-secondary">Cancel</a>
            </div>

        </form>
    </div>

</body>
</html>
