<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Survey</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>

    <%- include('partials/header') %>

    <div class="form-card">
        <h2>Add Post-Event Survey</h2>

        <% if (error_message) { %>
            <div class="error-message"><%= error_message %></div>
        <% } %>

        <form action="/postsurveys/add" method="POST">

            <!-- Select Event -->
            <div class="form-row">
                <label for="eventid">Event</label>
                <select id="eventid" name="eventid" required>
                    <option value="">-- Select an Event --</option>
                    <% (events || []).forEach(event => { %>
                        <option value="<%= event.eventid %>">
                            <%= event.eventname %> - <%= event.eventdatetimestart %>
                        </option>
                    <% }); %>
                </select>
            </div>

            <!-- Select Participant -->
            <div class="form-row">
                <label for="participantid">Participant</label>
                <select id="participantid" name="participantid" required>
                    <option value="">-- Select a Participant --</option>
                    <% (participants || []).forEach(part => { %>
                        <option value="<%= part.participantid %>">
                            <%= part.participantname %>
                        </option>
                    <% }); %>
                </select>
            </div>

            <!-- Rating -->
            <div class="form-row">
                <label for="rating">Rating (1-5)</label>
                <input 
                    type="number" 
                    id="rating" 
                    name="rating" 
                    min="1" max="5"
                    required
                >
            </div>

            <!-- Comments -->
            <div class="form-row">
                <label for="comments">Comments</label>
                <textarea 
                    id="comments" 
                    name="comments"
                    rows="4"
                ></textarea>
            </div>

            <!-- Submit Buttons -->
            <div class="form-row" style="margin-top: 20px;">
                <button type="submit" class="btn btn-primary">Add Survey</button>
            </div>

            <div class="form-row" style="margin-top: 10px;">
                <a href="/postsurveys" class="btn btn-secondary">Cancel</a>
            </div>

        </form>
    </div>

</body>
</html>
